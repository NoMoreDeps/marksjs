!function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=3)}([function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyStyle=void 0,t.applyStyle=function(e){var t,s;if(this.options.theme&&(this.themeStyles[e].theme[this.options.theme]?this.domContent.classList.add(this.themeStyles[e].theme[this.options.theme]):this.themeStyles.all.theme[this.options.theme]&&this.domContent.classList.add(this.themeStyles.all.theme[this.options.theme])),this.options.variant){this.options.variant.split(",").forEach(t=>{var s,n;null!==(s=this.themeStyles[e])&&void 0!==s&&s.variant[t]?this.domContent.classList.add(this.themeStyles[e].variant[t]):null!==(n=this.themeStyles.all)&&void 0!==n&&n.variant[t]&&this.domContent.classList.add(this.themeStyles.all.variant[t])})}if(null===(s=null===(t=this.themeStyles)||void 0===t?void 0:t[e])||void 0===s?void 0:s.classes){this.themeStyles[e].classes.split(",").forEach(e=>this.domContent.classList.add(e))}if(this.options.classes){this.options.classes.split(",").forEach(e=>this.domContent.classList.add(e))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModel=void 0;t.BaseModel=class{constructor(e){this._RendererRepository=e,this.source="",this.cleanSource="",this.output="",this.domElement=null,this.options={},this.processed=0,this.dirty=!1}reset(){this.cleanSource="",this.output="",this.options={},this.processed=0,this.parse()}process(){var e,t;if(this.domElement=document.createElement("p"),this._RendererRepository.getByType(this.type,this.get()).sort((e,t)=>t.weight-e.weight).forEach((e,t)=>{var s,n,i;0===t?(this.output=e.render(),e.domContent&&(null===(s=this.domElement)||void 0===s||s.appendChild(e.domContent),e.domContent=null),this.processed++):(e.set(this.type,this.output,this.options),e.canProcess()&&(this.output=e.render(),e.domContent&&(null===(n=this.domElement)||void 0===n||n.appendChild(e.domContent),e.domContent=null),this.processed++));do{e.set(this.type,this.output,this.options),e.succeeded()&&(this.output=e.render(),e.domContent&&(null===(i=this.domElement)||void 0===i||i.appendChild(e.domContent),e.domContent=null),this.processed++)}while(e.succeeded())}),0===this.domElement.childElementCount&&(this.domElement=null),1===(null===(e=this.domElement)||void 0===e?void 0:e.childElementCount))switch(null===(t=this.domElement.children.item(0))||void 0===t?void 0:t.tagName.toLowerCase()){case"br":case"p":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":this.domElement=this.domElement.children.item(0)}}append(e){}parse(){this.cleanSource=this.source}parseOptions(e){const t=e.split(" ").filter((e,t)=>0===t||e.length>0);t[0].includes(":")||(this.options.name=t.shift()),t.forEach(e=>{const t=e.split(":");this.options[t[0]]=2===t.length?t[1]:"true"})}get(){return{type:this.type,content:this.cleanSource,options:this.options}}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="TEXT",this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.source.endsWith("  ")&&(this.source+="\n"),this.parse()}append(e){this.source+=e.text,e.text.endsWith("  ")&&(this.source+="\n"),this.parse()}parse(){this.cleanSource=this.source}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(4),i=s(5),o=s(6),r=s(7),c=s(8),d=s(9),h=s(10),l=s(11),u=s(12),a=s(13),p=s(14),m=s(15),f=s(26),y=s(27),v=s(28),C=s(29),g=s(30),_=s(31),b=s(32),E=s(33),R=s(34),T=new m.MarksRenderer;T.registerRenderer(new E.EscapeRenderer),T.registerRenderer(new n.ItalicRenderer),T.registerRenderer(new c.BoldRenderer),T.registerRenderer(new v.LineRenderer),T.registerRenderer(new p.InlineQuoteRenderer),T.registerRenderer(new C.CheckRenderer),T.registerRenderer(new d.ImgRenderer),T.registerRenderer(new g.LinkRenderer),T.registerRenderer(new _.RulerRenderer),T.registerRenderer(new b.ListRenderer),T.registerRenderer(new i.HeadRenderer),T.registerRenderer(new r.CodeRenderer),T.registerRenderer(new o.TextRenderer),T.registerRenderer(new l.TableRenderer),T.registerRenderer(new h.BlockQRenderer),T.registerRenderer(new u.BlockTableRenderer),T.registerRenderer(new a.BlockImgRenderer),T.registerRenderer(new f.BlockMarksRenderer),T.registerRenderer(new y.BlockHtmlRenderer),T.registerRenderer(new R.BlockMermaidRenderer),T.setThemeStyle({text:{variant:{danger:"text-danger",justify:"justify"}},table:{classes:"table",variant:{striped:"table-striped",bordered:"table-bordered",small:"table-sm",headDark:"headDark"},theme:{dark:"table-dark"}},img:{variant:{fluid:"img-fluid",thumbnail:"img-thumbnail",rounded:"rounded",circle:"rounded-circle"}},all:{variant:{primary:"text-primary",secondary:"text-secondary",success:"text-success",danger:"text-danger",warning:"text-warning",info:"text-info",bgPrimary:"bg-primary",bgSecondary:"bg-secondary",bgSuccess:"bg-success",bgDanger:"bg-danger",bgWarning:"bg-warning",bgInfo:"bg-info"}}}),fetch("md/marks-def.md").then(e=>e.text()).then(e=>{const t=document.querySelector("#marks");T.renderDidMount=()=>{Prism.highlightAll(),mermaid.initialize({theme:"forest"}),mermaid.init(void 0,document.querySelector(".mermaid"))},null==t||t.appendChild(T.internalRender(e))})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItalicRenderer=void 0;t.ItalicRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=100}render(){let e=/\_{1}(.*?)\_{1}/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<em>$1</em>"):(e=/\*{1}(.*?)\*{1}/,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<em>$1</em>"):this.content)}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadRenderer=void 0;const n=s(0);t.HeadRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){var e,t,s,i;let o=/^\s*(?<header>#{1,6})(?<content>.*)/;if(this._succeeded=o.test(this.content),this._succeeded){const r=o.exec(this.content),c=null!==(t=null===(e=null==r?void 0:r.groups)||void 0===e?void 0:e.header)&&void 0!==t?t:"",d=null!==(i=null===(s=null==r?void 0:r.groups)||void 0===s?void 0:s.content)&&void 0!==i?i:"";this.content=`<h${c.length}>${d}</h${c.length}>`,this.domContent=document.createElement("div"),this.domContent.innerHTML=this.content,this.domContent=this.domContent.children.item(0),n.applyStyle.call(this,"head"),this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null)}return this.content}succeeded(){return this._succeeded}canProcess(){return"HEAD"===this.type}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderer=void 0;const n=s(0);t.TextRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["TEXT","BLANK"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){var e;if(this._succeeded=!1,"BLANK"===this.type){this.domContent=document.createElement("p");for(let e=1;e<this.content.length;e+=2)this.domContent.appendChild(document.createElement("br"))}else if(this.content.length>0){if(this.options.nested){const e=/@@(\w+)@@/g;e.test(this.content)&&(this.content=this.content.replace(e,"<div id='$1'></div>"))}if(this.domContent=document.createElement(null!==(e=this.options.elt)&&void 0!==e?e:"span"),this.domContent.innerHTML=this.content.replace(/\n/g,"<br />"),n.applyStyle.call(this,"text"),this.options.nested){this.domContent.querySelectorAll("div").forEach(e=>{e.id in this.globalRefs&&e.appendChild(this.globalRefs[e.id])})}this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null)}return this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeRenderer=void 0;const n=s(0);t.CodeRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["CODE"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){this._succeeded=!1;const e=document.createElement("code");return this.domContent=document.createElement("pre"),e.appendChild(document.createTextNode(this.content)),this.domContent.appendChild(e),n.applyStyle.call(this,"code"),this.options.language&&e.classList.add(`language-${this.options.language}`),this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){return"CODE"===this.type}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoldRenderer=void 0;t.BoldRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=101}render(){let e=/\_{2}(.*?)\_{2}/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<b>$1</b>"):(e=/\*{2}(.*?)\*{2}/,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<b>$1</b>"):this.content)}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImgRenderer=void 0;t.ImgRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK-Q","HEAD","TEXT","TABLE","LIST-O","LIST-U","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=100}render(){let e=/!\[(?<alt>.*?)\]\((?<link>.*?)\s*(?<title>\".+\")?\)/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,'<img src="$2" alt="$1" title="$3"/>'):this.content}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockQRenderer=void 0;const n=s(0);t.BlockQRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK-Q"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){var e;if(this._succeeded=!1,this.options.nested){const e=/@@(\w+)@@/g;e.test(this.content)&&(this.content=this.content.replace(e,"<div id='$1'></div>"))}this.domContent=document.createElement("blockquote"),n.applyStyle.call(this,"quote");const t=null===(e=this.cloneRenderer)||void 0===e?void 0:e.call(this);if(t){const e=this.content.split("\n");this.content=e.map(e=>e.trimLeft()).join("\n");const s=t.internalRender(this.content);s&&this.domContent.appendChild(s)}else console.log("No renderer");if(this.options.nested){this.domContent.querySelectorAll("div").forEach(e=>{e.id in this.globalRefs&&e.appendChild(this.globalRefs[e.id])})}return this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableRenderer=void 0;const n=s(0);t.TableRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["TABLE"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){var e,t;if(this._succeeded=!1,this.options.nested){const e=/@@(\w+)@@/g;e.test(this.content)&&(this.content=this.content.replace(e,"<div id='$1'></div>"))}const s=this.content.split("\n").map(e=>((e=e.trim()).endsWith("|")&&(e=e.substring(0,e.length-1)),e=e.substr(1)));if(s.length<2)return this.content;const i=s.shift().split("|"),o=s.shift().split("|").map(e=>{let t="left";return e.startsWith(":")&&e.endsWith(":")&&(t="center"),!e.startsWith(":")&&e.endsWith(":")&&(t="right"),t});let r=`\n  <table>\n    <thead>\n      <tr>\n      ${i.map((e,t)=>`        <th align="${o[t]}">${e}</th>`).join("\n")}\n      </tr>\n    <tbody>\n    ${s.map(e=>`\n      <tr>\n      ${e.split("|").map((e,t)=>`        <td align="${o[t]}">${e}</td>`).join("\n")}\n      </tr>`).join("\n")}\n    </tbody>\n  </table>\n    `;if(this.domContent=document.createElement("div"),this.domContent.innerHTML=r,(null===(e=this.domContent)||void 0===e?void 0:e.querySelector("table"))&&(this.domContent=null===(t=this.domContent)||void 0===t?void 0:t.querySelector("table"),n.applyStyle.call(this,"table"),this.options.width&&(this.domContent.style.width=this.options.width)),this.options.nested){this.domContent.querySelectorAll("div").forEach(e=>{e.id in this.globalRefs&&e.appendChild(this.globalRefs[e.id])})}return this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockTableRenderer=void 0;const n=s(0);t.BlockTableRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=100}render(){var e,t,s;if(this._succeeded=!1,this.options.nested){const e=/@@(\w+)@@/g;e.test(this.content)&&(this.content=this.content.replace(e,"<div id='$1'></div>"))}if("markdown"===this.options.format){const e=this.content.split("\n").map(e=>((e=e.trim()).endsWith("|")&&(e=e.substring(0,e.length-1)),e=e.substr(1)));if(e.length<2)return this.content;const t=e.shift().split("|"),s=e.shift().split("|").map(e=>{let t="left";return e.startsWith(":")&&e.endsWith(":")&&(t="center"),!e.startsWith(":")&&e.endsWith(":")&&(t="right"),t});let n=`\n    <table>\n      <thead>\n        <tr>\n        ${t.map((e,t)=>`        <th align="${s[t]}">${e}</th>`).join("\n")}\n        </tr>\n      <tbody>\n      ${e.map(e=>`\n        <tr>\n        ${e.split("|").map((e,t)=>`        <td align="${s[t]}">${e}</td>`).join("\n")}\n        </tr>`).join("\n")}\n      </tbody>\n    </table>\n      `;this.domContent=document.createElement("div"),this.domContent.innerHTML=n}if("csv"===this.options.format){const t=null!==(e=this.options.separator)&&void 0!==e?e:";",s=this.content.split("\n").map(e=>e=e.trim());if(s.length<2)return this.content;const n=s.shift().split(t),i=n.map((e,t)=>{var s;return null!==(s=this.options[`align_col${t+1}`])&&void 0!==s?s:"left"});let o=`\n    <table>\n      <thead>\n        <tr>\n        ${n.map((e,t)=>`        <th align="${i[t]}">${e}</th>`).join("\n")}\n        </tr>\n      <tbody>\n      ${s.map(e=>`\n        <tr>\n        ${e.split(t).map((e,t)=>`        <td align="${i[t]}">${e}</td>`).join("\n")}\n        </tr>`).join("\n")}\n      </tbody>\n    </table>\n      `;this.domContent=document.createElement("div"),this.domContent.innerHTML=o}if((null===(t=this.domContent)||void 0===t?void 0:t.querySelector("table"))&&(this.domContent=null===(s=this.domContent)||void 0===s?void 0:s.querySelector("table"),n.applyStyle.call(this,"table"),this.options.width&&(this.domContent.style.width=this.options.width)),this.options.nested){this.domContent.querySelectorAll("div").forEach(e=>{e.id in this.globalRefs&&e.appendChild(this.globalRefs[e.id])})}return this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){var e;if("table"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())&&this.options.format)switch(this.options.format){case"markdown":case"csv":return!0;default:return!1}return!1}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockImgRenderer=void 0;const n=s(0);t.BlockImgRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){this._succeeded=!1;const e=JSON.parse(`{ ${this.content} }`);return this.domContent=document.createElement("img"),this.domContent.setAttribute("alt",e.alt),this.domContent.setAttribute("title",e.title),this.domContent.setAttribute("src",e.src),n.applyStyle.call(this,"img"),this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"img"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineQuoteRenderer=void 0;t.InlineQuoteRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=100}render(){let e=/\`{1}(.*?)\`{1}/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<code>$1</code>"):this.content}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MarksRenderer=void 0;const i=s(16),o=n(s(2)),r=n(s(17)),c=n(s(18)),d=n(s(19)),h=n(s(20)),l=n(s(21)),u=n(s(22)),a=n(s(23)),p=n(s(24)),m=n(s(25));class f{constructor(e){this._rendererRepo=null!=e?e:new i.RendererRepository,this._globalRefs={}}clone(){const e=new f(this._rendererRepo.clone());return e._themeStyles=this._themeStyles,e._globalRefs=this._globalRefs,e._rendererRepo.refs.forEach(e=>e.cloneRenderer=this.clone.bind(this)),e}setThemeStyle(e){this._themeStyles=e}internalRender(e,t=!0){var s;const n=e.replace(/\r\n/g,"\n");this._rendererRepo.refs.forEach(e=>{e.globalRefs=this._globalRefs,e.themeStyles=this._themeStyles});let i=null!==(s=n.replace(/\\r\\n/g,"\n").split("\n"))&&void 0!==s?s:[];const f=[{type:"HEAD",rgx:/^\s*#{1,6}(.*)/,apply:["-"]},{type:"HEAD-B",rgx:/^\s*=+\s*/,apply:["-"]},{type:"CHECK",rgx:/^\s*\-\s*\[[ x]\](.*)/,apply:["-"]},{type:"LIST-O",rgx:/^\s*[0-9]+\.\s(.*)/,apply:["-"]},{type:"LIST-U",rgx:/^\s*\*\s+(.*)/,apply:["-"]},{type:"TABLE",rgx:/^\s*\|(.*)\|\s*/,apply:["-"]},{type:"BLOCK-Q",rgx:/^\s*\>(.*)/,apply:["-"]},{type:"BLOCK-B",rgx:/^\s*\[.*?\]\s*\{\{\s*/,apply:["-"],state:"BLOCK"},{type:"BLOCK-E",rgx:/^\s*\}\}\s*$/,apply:["BLOCK"],state:"-"},{type:"CODE-S",rgx:/^\s{4}.*$/,apply:["-"]},{type:"CODE-B",rgx:/^\s*```\w*\s*/,apply:["-"],state:"CODE"},{type:"CODE-E",rgx:/^\s*```\s*$/,apply:["CODE"],state:"-"}],y=[];let v="-";const C=f.filter(e=>"BLOCK-B"===e.type)[0];let g=0;const _=performance.now();i.forEach(e=>{let t=!1;if(f.filter(e=>e.apply.includes(v)).forEach(s=>{if(!t&&s.rgx.test(e)){if("BLOCK-E"===s.type&&(g--,console.log("END-LEVEL",g),g>0))return;"BLOCK-B"===s.type&&(g++,console.log("BEG-LEVEL",g)),y.push({type:s.type,text:e}),t=!0,"state"in s&&(v=s.state)}}),!t)switch(v){case"BLOCK":C.rgx.test(e)&&(g++,console.log("BEG-LEVEL",g)),y.push({type:"T-TEXT",text:e});break;case"CODE":y.push({type:"C-TEXT",text:e});break;default:0===e.length?y.push({type:"BLANK",text:""}):y.push({type:"TEXT",text:e})}}),y.filter(e=>"LIST-U"===e.type).forEach(e=>{e.text.trim().startsWith("*")&&e.text.trim().endsWith("*")&&(e.type="TEXT")});let b=null,E=[];const R={TEXT:o.default,HEAD:r.default},T={"LIST-O":d.default,"LIST-U":c.default,"BLOCK-Q":m.default,TABLE:h.default,CHECK:a.default,BLANK:p.default},L={"CODE-B":u.default,"BLOCK-B":l.default};y.forEach(e=>{switch(e.type){case"TEXT":case"HEAD":b&&(E.push(b),b=null),E.push(new R[e.type](e,this._rendererRepo));break;case"LIST-O":case"LIST-U":case"CHECK":case"BLOCK-Q":case"TABLE":case"BLANK":if(b&&(null==b?void 0:b.type)!==e.type&&(E.push(b),b=null),b){b.append(e);break}b=new T[e.type](e,this._rendererRepo);break;case"CODE-B":case"BLOCK-B":b&&(E.push(b),b=null),b=new L[e.type](e,this._rendererRepo);break;case"C-TEXT":case"T-TEXT":null==b||b.append(e);break;case"CODE-E":case"BLOCK-E":b&&E.push(b),b=null;break;case"HEAD-B":if(b&&(E.push(b),b=null),"TEXT"===E[E.length-1].type){const t=E.pop(),s=e.text.replace(/=/g,"#");E.push(new r.default({type:"HEAD",text:`${s} ${null==t?void 0:t.source}`},this._rendererRepo))}else E.push(new o.default(e,this._rendererRepo))}}),null!==b&&E.push(b),b=null,E.forEach(e=>{if("TEXT"===e.type){const t=e.source.trim();switch(t[0]){case"_":if(t.length>2){let s=!0;for(let e=0;e<t.length;e++)t[e]!==t[0]&&(s=!1);s&&(e.type="RULER")}}}if("TEXT"!==e.type||null!==b)return"TEXT"===e.type&&b?(b.append({text:e.source}),void(e.dirty=!0)):void("TEXT"!==e.type&&(b=null));b=e}),E=E.filter(e=>!1===e.dirty),console.table(E.map(e=>({type:e.type,source:e.source}))),E.forEach(e=>{e.process()});const O=performance.now(),B=document.createElement("div");return E.forEach(e=>e.domElement&&B.appendChild(e.domElement)),console.log(`Processed in ${O-_} ms`),setTimeout(()=>{var e;null===(e=this.renderDidMount)||void 0===e||e.call(this)},0),B}render(e,t){var s,n,i,o;let r=null!==(n=null===(s=document.querySelector(e))||void 0===s?void 0:s.innerHTML)&&void 0!==n?n:"";var c=document.createElement("textarea");c.innerHTML=r,r=null!==(i=c.value)&&void 0!==i?i:"";const d=this.internalRender(r);(null!==(o=document.querySelector(null!=t?t:"body"))&&void 0!==o?o:document.body).appendChild(d)}registerRenderer(e){e.cloneRenderer=this.clone.bind(this),this._rendererRepo.register(e)}}t.MarksRenderer=f},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RendererRepository=void 0;class n{constructor(){this.refs=[],this.hash={}}clear(){this.hash={}}register(e){this.refs.push(e),e.applyTo.forEach(t=>{t in this.hash||(this.hash[t]=[]),this.hash[t].push(e)})}getByType(e,t){var s,n;return null!==(n=null===(s=this.hash[e])||void 0===s?void 0:s.filter(s=>(s.set(e,t.content,t.options),s.canProcess())))&&void 0!==n?n:[]}clone(){const e=new n;return this.refs.forEach(t=>e.register(new t.constructor)),e}}t.RendererRepository=n},function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(2));class o extends i.default{constructor(e,t){if(super(e,t),this.type="HEAD",this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="LIST-U",this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}append(e){this.source+="\n",this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="LIST-O",this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}append(e){this.source+="\n",this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){super(t),this.type="TABLE";let s=e.text,n="";e.text.includes("::- ")&&([s,n]=e.text.split("::-")),this.source=s,n.length&&this.parseOptions(n)}append(e){this.source+="\n",this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){var s,n,i;super(t),this.type="BLOCK",this.reset(),this.parseOptions(null!==(i=null===(n=null===(s=/^\s*\[(?<options>.*?)\]\s*\{\{/.exec(e.text))||void 0===s?void 0:s.groups)||void 0===n?void 0:n.options)&&void 0!==i?i:"")}append(e){this.source.length>0&&(this.source+="\n"),this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){super(t),this.type="CODE",this.parseOptions(`language:${e.text.trim().substr(3)}`),super.source=""}append(e){this.source.length>0&&(this.source+="\n"),this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="CHECK",this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}append(e){this.source+="\n",this.source+=e.text,this.parse()}parse(){this.cleanSource=this.source}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){super(t),this.type="BLANK",this.reset(),this.source="@",this.parse()}append(e){this.source+="@",this.parse()}parse(){this.cleanSource=this.source}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="BLOCK-Q",this.source=e.text.replace(">",""),this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}append(e){this.source+="\n",this.source+=e.text.replace(">",""),this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockMarksRenderer=void 0;t.BlockMarksRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){var e;this._succeeded=!1;const t=null===(e=this.cloneRenderer)||void 0===e?void 0:e.call(this);return t?(this.content=this.content.split("\n").map(e=>e.trimLeft()).join("\n"),this.domContent=t.internalRender(this.content)):(this.domContent=document.createElement("div"),this.domContent.appendChild(document.createTextNode(this.content))),this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"marks"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockHtmlRenderer=void 0;t.BlockHtmlRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){if(this._succeeded=!1,this.options.nested){const e=/@@(\w+)@@/g;e.test(this.content)&&(this.content=this.content.replace(e,"<div id='$1'></div>"))}if(this.domContent=document.createElement("div"),this.domContent.innerHTML=this.content,this.options.nested){this.domContent.querySelectorAll("div").forEach(e=>{e.id in this.globalRefs&&e.appendChild(this.globalRefs[e.id])})}return this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"html"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineRenderer=void 0;t.LineRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=101}render(){let e=/\~{2}(.*?)\~{2}/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<span style='text-decoration: line-through'>$1</span>"):(e=/\~{1}(.*?)\~{1}/,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<span style='text-decoration: underline'>$1</span>"):this.content)}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckRenderer=void 0;const n=s(0);t.CheckRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["CHECK"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){var e;this.domContent=document.createElement((null===(e=this.options)||void 0===e?void 0:e.ordered)?"ol":"ul");const t=/\s*(?<type>[\-0-9]\.?)\s*(?<check>\[[ x]\])\s*(?<text>.*)\s*/;this.content.split("\n").map(e=>e.trim()).map(e=>{var s,n,i;const o=t.exec(e);return{type:null===(s=null==o?void 0:o.groups)||void 0===s?void 0:s.type,check:null===(n=null==o?void 0:o.groups)||void 0===n?void 0:n.check,text:null===(i=null==o?void 0:o.groups)||void 0===i?void 0:i.text}}).forEach(e=>{var t,s,n;const i=document.createElement("li"),o=document.createElement("input");o.setAttribute("type","checkbox"),"[x]"===(null===(t=e.check)||void 0===t?void 0:t.toLowerCase())&&o.setAttribute("checked","checked"),o.onclick=()=>!1,o.style.marginRight="5px",i.appendChild(o);const r=document.createElement("span");r.innerHTML=e.text,i.appendChild(r),(null===(s=this.options)||void 0===s?void 0:s.noBullet)&&(i.style.listStyleType="none"),null===(n=this.domContent)||void 0===n||n.appendChild(i)});return n.applyStyle.call(this,"check"),this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderer=void 0;t.LinkRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK-Q","HEAD","TEXT","TABLE","LIST-O","LIST-U","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=90}render(){let e=/\[(?<alt>.*?)\]\((?<link>.*?)\s*(?<title>\".+\")?\)/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,'<a href="$2" title="$3">$1</a>'):this.content}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RulerRenderer=void 0;t.RulerRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["RULER"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=110}render(){return this._succeeded=!1,this.domContent=document.createElement("hr"),"dashed"===this.options.variant&&(this.domContent.style.borderStyle="dashed"),this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListRenderer=void 0;const n=s(0);t.ListRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["LIST-U","LIST-O"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){if(this._succeeded=!1,this.options.nested){const e=/@@(\w+)@@/g;e.test(this.content)&&(this.content=this.content.replace(e,"<div id='$1'></div>"))}const e=this.content.split("\n");let t=-1,s=0;let i=[];e.forEach((e,n,o)=>{const r=(e=>{let t=0;for(let s=0;s<e.length&&" "===e.charAt(s);s++)t++;return t})(e),c={s:r,text:e.trimLeft().substr(2).trimLeft(),parent:t,i:n,c:[]};if(r>s&&(t=n-1,c.parent=t,s=r),r<s){let e=-1,n=null;i.forEach(t=>{t.i<c.i&&t.s<c.s&&(e=t.i,n=t)}),t=e,c.parent=e,s=r}i.push(c)}),i=i.map(e=>(-1!==e.parent&&i.filter(t=>t.i===e.parent)[0].c.push(e),e)).filter(e=>-1==e.parent);const o=(e,t)=>(t.forEach(t=>{const s=document.createElement("li");if(s.innerHTML=t.text,e.appendChild(s),t.c.length){const e=document.createElement("LIST-U"===this.type?"ul":"ol");s.appendChild(e),o(e,t.c)}}),e),r=document.createElement("LIST-U"===this.type?"ul":"ol");if(o(r,i),this.domContent=r,n.applyStyle.call(this,"list"),this.options.nested){this.domContent.querySelectorAll("div").forEach(e=>{e.id in this.globalRefs&&e.appendChild(this.globalRefs[e.id])})}return this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeRenderer=void 0;t.EscapeRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=150}render(){let e=/\\\\/g;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#92;"):(e=/\\&/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#38;"):(e=/\\\-/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#45;"):(e=/\\`/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#96;"):(e=/\\\*/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#42;"):(e=/\\_/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#95;"):(e=/\\~/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#126;"):this.content))))))}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockMermaidRenderer=void 0;t.BlockMermaidRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){return this._succeeded=!1,this.domContent=document.createElement("div"),this.domContent.classList.add("mermaid"),this.domContent.innerHTML=this.content,this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"mermaid"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}}]);