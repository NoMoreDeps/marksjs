var Marks_Bootstrap=function(e){var t={};function s(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=29)}([function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{d(n.next(e))}catch(e){o(e)}}function c(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}d((n=n.apply(e,t||[])).next())}))};function i(e){return e.replace(/\</g,"&lt;")}function o(e){return new Promise((function(t){const s=document.createElement("script");s.src=e,s.addEventListener("load",(function(){t(!0)})),document.head.appendChild(s)}))}function r(e){var t,s,n;const o=/@@([\w\.]+)@@/g;let r=null,c=e.content;for(;null!==(r=o.exec(e.content));){const o=r[0].substr(2).replace("@@","");(null===(t=null==e?void 0:e.context)||void 0===t?void 0:t[o])?c=c.replace(`@@${o}@@`,i(e.context[o])):c=c.replace(`@@${o}@@`,`<${null!==(s=e.options.refElt)&&void 0!==s?s:"div"} data-mk-ref="true" id='${o}'></${null!==(n=e.options.refElt)&&void 0!==n?n:"div"}>`)}e.content=c}function c(e){const t=e.domContent.findAll(e=>"true"===e.getAttribute("data-mk-ref"));t&&t.forEach(t=>{if(t.id in e.globalRefs)return t.appendChild(e.globalRefs[t.id]),void delete e.globalRefs[t.id]})}function d(e){e.options.ref&&(e.globalRefs[e.options.ref]=e.domContent,e.domContent=null)}function h(e,t){var s,n,i,o,r,c,d,h;if(e.options.theme&&((null===(i=null===(n=null===(s=e.themeStyles)||void 0===s?void 0:s[t])||void 0===n?void 0:n.theme)||void 0===i?void 0:i[e.options.theme])?e.domContent.classList.add(e.themeStyles[t].theme[e.options.theme]):(null===(c=null===(r=null===(o=e.themeStyles)||void 0===o?void 0:o.all)||void 0===r?void 0:r.theme)||void 0===c?void 0:c[e.options.theme])&&e.domContent.classList.add(e.themeStyles.all.theme[e.options.theme])),e.options.variant){e.options.variant.split(",").forEach(s=>{var n,i;(null===(n=e.themeStyles[t])||void 0===n?void 0:n.variant[s])?e.domContent.classList.add(e.themeStyles[t].variant[s]):(null===(i=e.themeStyles.all)||void 0===i?void 0:i.variant[s])&&e.domContent.classList.add(e.themeStyles.all.variant[s])})}if(null===(h=null===(d=e.themeStyles)||void 0===d?void 0:d[t])||void 0===h?void 0:h.classes){e.themeStyles[t].classes.split(",").forEach(t=>e.domContent.classList.add(t))}if(e.options.classes){e.options.classes.split(",").forEach(t=>e.domContent.classList.add(t))}}Object.defineProperty(t,"__esModule",{value:!0}),t.applyStyle=t.processInternals=t.processRef=t.prepareInternals=t.processNestedRef=t.prepareNestedRef=t.formatMinSpace=t.loadAssets=t.loadScript=t.sanitize=t.waitAsync=void 0,t.waitAsync=(e=0)=>new Promise(t=>setTimeout(()=>{t()},e)),t.sanitize=i,t.loadScript=o,t.loadAssets=function(e){return n(this,void 0,void 0,(function*(){for(let t=0;t<e.length;t++)if(e[t].endsWith(".js")&&(yield o(e[t])),e[t].endsWith(".css")){const s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("href",e[t]),document.head.appendChild(s)}}))},t.formatMinSpace=function(e){let t=e.length;const s=e.split("\n");return s.forEach(e=>{const s=e.search(/\S/);s<t&&(t=s)}),t<0&&(t=0),s.map(e=>e.substring(t)).join("\n")},t.prepareNestedRef=r,t.processNestedRef=c,t.prepareInternals=function(e){r(e)},t.processRef=d,t.processInternals=function(e,t){c(e),h(e,t),d(e)},t.applyStyle=h},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModel=void 0;const n=s(5);t.BaseModel=class{constructor(e){this._RendererRepository=e,this.source="",this.cleanSource="",this.output="",this.domElement=null,this.options={},this.processed=0,this.dirty=!1,this.document=new n.Document("Dom")}reset(){this.cleanSource="",this.output="",this.options={},this.processed=0,this.parse()}process(e){var t,s,n;this.domElement=this.document.createElement(null!==(t=this.options.pElt)&&void 0!==t?t:"p");if(this._RendererRepository.getByType(this.type,this.get()).sort((e,t)=>t.weight-e.weight).forEach((t,s)=>{var n,i,o;t.context=e,0===s?(this.output=t.render(),t.domContent&&(null===(n=this.domElement)||void 0===n||n.appendChild(t.domContent),t.domContent=null),this.processed++):(t.set(this.type,this.output,this.options),t.canProcess()&&(this.output=t.render(),t.domContent&&(null===(i=this.domElement)||void 0===i||i.appendChild(t.domContent),t.domContent=null),this.processed++));do{t.set(this.type,this.output,this.options),t.succeeded()&&(this.output=t.render(),t.domContent&&(null===(o=this.domElement)||void 0===o||o.appendChild(t.domContent),t.domContent=null),this.processed++)}while(t.succeeded())}),0===this.domElement.childElementCount&&(this.domElement=null),1===(null===(s=this.domElement)||void 0===s?void 0:s.childElementCount))if(this.options.noPElt)this.domElement=this.domElement.getChildItem(0);else switch(null===(n=this.domElement.getChildItem(0))||void 0===n?void 0:n.tagName.toLowerCase()){case"br":case"p":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":this.domElement=this.domElement.getChildItem(0)}this.options["mk-show"]&&(e[this.options["mk-show"]]||(this.domElement=null))}append(e){}parse(){this.cleanSource=this.source}parseOptions(e){const t=e.split(" ").filter((e,t)=>0===t||e.length>0);t[0].includes(":")||(this.options.name=t.shift()),t.forEach(e=>{const t=e.split(":");this.options[t[0]]=2===t.length?t[1]:"true"})}get(){return{type:this.type,content:this.cleanSource,options:this.options}}clone(){const e=new this.constructor;return e._RendererRepository=this._RendererRepository,e.options=this.options,e.source=this.source,e.cleanSource=this.cleanSource,e.output=this.output,e}}},function(e,t,s){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Plugins=void 0;var r=s(30);Object.defineProperty(t,"MarksRenderer",{enumerable:!0,get:function(){return r.MarksRenderer}});const c=s(7),d=s(8),h=s(9),l=s(10),a=s(11),u=s(12),p=s(13),m=s(14),f=s(15),v=s(16),y=s(17),g=s(18),_=s(19),C=s(20),E=s(21),b=s(22),T=s(23),R=s(24),O=s(25),L=s(26);t.Helper=o(s(0)),t.Plugins=[v.EscapeRenderer,c.BoldRenderer,d.ItalicRenderer,l.EmojiRenderer,h.LineRenderer,a.InlineQuoteRenderer,u.LinkRenderer,p.ImgRenderer,m.CheckRenderer,f.CodeRenderer,y.HeadRenderer,g.ListRenderer,_.RulerRenderer,C.TableRenderer,E.TextRenderer,b.BlockQRenderer,T.BlockHtmlRenderer,R.BlockImgRenderer,O.BlockMarksRenderer,L.BlockTableRenderer];var x=s(7);Object.defineProperty(t,"BoldRenderer",{enumerable:!0,get:function(){return x.BoldRenderer}});var B=s(8);Object.defineProperty(t,"ItalicRenderer",{enumerable:!0,get:function(){return B.ItalicRenderer}});var P=s(9);Object.defineProperty(t,"LineRenderer",{enumerable:!0,get:function(){return P.LineRenderer}});var N=s(10);Object.defineProperty(t,"EmojiRenderer",{enumerable:!0,get:function(){return N.EmojiRenderer}});var j=s(11);Object.defineProperty(t,"InlineQuoteRenderer",{enumerable:!0,get:function(){return j.InlineQuoteRenderer}});var w=s(12);Object.defineProperty(t,"LinkRenderer",{enumerable:!0,get:function(){return w.LinkRenderer}});var M=s(13);Object.defineProperty(t,"ImgRenderer",{enumerable:!0,get:function(){return M.ImgRenderer}});var S=s(14);Object.defineProperty(t,"CheckRenderer",{enumerable:!0,get:function(){return S.CheckRenderer}});var k=s(15);Object.defineProperty(t,"CodeRenderer",{enumerable:!0,get:function(){return k.CodeRenderer}});var I=s(16);Object.defineProperty(t,"EscapeRenderer",{enumerable:!0,get:function(){return I.EscapeRenderer}});var D=s(17);Object.defineProperty(t,"HeadRenderer",{enumerable:!0,get:function(){return D.HeadRenderer}});var $=s(18);Object.defineProperty(t,"ListRenderer",{enumerable:!0,get:function(){return $.ListRenderer}});var A=s(19);Object.defineProperty(t,"RulerRenderer",{enumerable:!0,get:function(){return A.RulerRenderer}});var H=s(20);Object.defineProperty(t,"TableRenderer",{enumerable:!0,get:function(){return H.TableRenderer}});var K=s(21);Object.defineProperty(t,"TextRenderer",{enumerable:!0,get:function(){return K.TextRenderer}});var X=s(22);Object.defineProperty(t,"BlockQRenderer",{enumerable:!0,get:function(){return X.BlockQRenderer}});var U=s(23);Object.defineProperty(t,"BlockHtmlRenderer",{enumerable:!0,get:function(){return U.BlockHtmlRenderer}});var W=s(24);Object.defineProperty(t,"BlockImgRenderer",{enumerable:!0,get:function(){return W.BlockImgRenderer}});var Q=s(25);Object.defineProperty(t,"BlockMarksRenderer",{enumerable:!0,get:function(){return Q.BlockMarksRenderer}});var F=s(26);Object.defineProperty(t,"BlockTableRenderer",{enumerable:!0,get:function(){return F.BlockTableRenderer}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockBsGridRenderer=void 0;const n=s(2);t.BlockBsGridRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){var e;this.document||(this.document=this.getDocument()),this._succeeded=!1,this.options.nested="true",this.domContent=this.document.createElement("div"),n.Helper.prepareInternals(this),this.domContent.classList.add("container");const t=this.content.split("\n").map(e=>e.trim());let s=this.document.createElement("div");return s.classList.add("row"),t.forEach(e=>{var t;if(""===e)return s.childElementCount>0&&(null===(t=this.domContent)||void 0===t||t.appendChild(s)),s=this.document.createElement("div"),void s.classList.add("row");const[n,i]=e.split("|"),o=this.document.createElement("div");n.split(",").forEach(e=>{o.classList.add(e)}),o.setInnerHTML(i),s.appendChild(o)}),s.childElementCount>0&&(null===(e=this.domContent)||void 0===e||e.appendChild(s)),n.Helper.processInternals(this,"bs-grid"),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"bs-grid"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="TEXT",e){if(this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.source.endsWith("  ")&&(this.source+="\n"),this.parse()}}append(e){this.source+=e.text,e.text.endsWith("  ")&&(this.source+="\n"),this.parse()}parse(){this.cleanSource=this.source}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Document=void 0;const n=s(32);t.Document=class{constructor(e){this.target=e,this._root=new n.VDom_Element(this,"div",e)}get root(){return this._root}findFirst(e,t=-1){return this.root.findFirst(e,t)}findAll(e,t=-1){return this.root.findAll(e,t)}createElement(e,t){return new n.VDom_Element(this,e,this.target,t)}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentNode=t.DoctypeNode=t.NODE_TYPE=t.Node=void 0;class n{constructor({tagName:e,nodeType:t,attrs:s,textContent:n,parentNode:i,childNodes:o}){this.tagName=e,this.nodeType=t,this.textContent=n,this.parentNode=i,this.attrs=s,this.childNodes=o||[],1===t&&(s.id&&(this.id=s.id),s.class&&(this.className=s.class))}appendChild(e){e&&(e.parentNode=this,this.childNodes.push(e))}insertAfter(e,t){if(!t)return this.appendChild(e);this.childNodes.some((s,n)=>{if(s===t)return e.parentNode=this,this.childNodes.splice(n,0,e),!0})}insertBefore(e,t){if(!t)return this.appendChild(e);this.childNodes.some((s,n)=>{if(s===t)return e.parentNode=this,0===n?this.childNodes.unshift(e):this.childNodes.splice(n-1,0,e),!0})}toJSON(){const e={tagName:this.tagName,nodeType:this.nodeType};return this.childNodes.length&&(e.childNodes=this.childNodes),this.textContent&&(e.textContent=this.textContent),this.attrs&&(e.attrs=this.attrs),this.id&&(e.id=this.id),this.className&&(e.className=this.className),e}}t.Node=n,t.NODE_TYPE={ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10};t.DoctypeNode=class extends n{constructor(e){super(e),this.id=void 0,this.nodeType=10,this.systemId=e.systemId||"",this.publicId=e.publicId||"",this.name=e.name||"html"}toJSON(){return{tagName:this.tagName,nodeType:this.nodeType,publicId:this.publicId,systemId:this.systemId,name:this.name}}};t.DocumentNode=class extends n{getElementById(e){return e?function t(s){let n;return s.some(s=>1===s.nodeType&&(n=s.id===e?s:t(s.childNodes))),n}(this.childNodes):null}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoldRenderer=void 0;t.BoldRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=101}render(){let e=/\_{2}(.*?)\_{2}/,t=/\s+\_{2}(.*?)\_{2}/;return this._succeeded=t.test(this.content),this._succeeded?this.content.replace(e,"<b>$1</b>"):(t=/\*{2}(.*?)\*{2}/,this._succeeded=t.test(this.content),this._succeeded?this.content.replace(t,"<b>$1</b>"):this.content)}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItalicRenderer=void 0;t.ItalicRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=100}render(){let e=/\_{1}(.*?)\_{1}/,t=/\s+\_{1}(.*?)\_{1}/;return this._succeeded=t.test(this.content),this._succeeded?this.content.replace(e,"<em>$1</em>"):(t=/\*{1}(.*?)\*{1}/,this._succeeded=t.test(this.content),this._succeeded?this.content.replace(t,"<em>$1</em>"):this.content)}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LineRenderer=void 0;t.LineRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=101}render(){let e=/\~{2}(.*?)\~{2}/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<span style='text-decoration: line-through'>$1</span>"):(e=/\~{1}(.*?)\~{1}/,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<span style='text-decoration: underline'>$1</span>"):this.content)}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{d(n.next(e))}catch(e){o(e)}}function c(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiRenderer=void 0;const i=s(0);let o=!1;t.EmojiRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=100,this._serverPath="https://cdn.jsdelivr.net/gh/NoMoreDeps/marksjs/statics/emoji.css"}render(){let e=/\:([aA-zZ0-9+-]+)\:/,t=this.content;return t=t.replace(/\:(-+)\:/,"##$1##"),this._succeeded=e.test(t),this._succeeded&&(t=t.replace(e,'<i class="em em-$1" aria-role="presentation"></i>')),t=t.replace(/##(-+)##/,":$1:"),this._succeeded?t:this.content}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}renderFinished(e){return n(this,void 0,void 0,(function*(){o||(o=!0,yield i.loadAssets([""+this._serverPath]))}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InlineQuoteRenderer=void 0;t.InlineQuoteRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=100}render(){let e=/\`{1}(.*?)\`{1}/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"<code>$1</code>"):this.content}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkRenderer=void 0;t.LinkRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK-Q","HEAD","TEXT","TABLE","LIST-O","LIST-U","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=90}render(){let e=/\[(?<alt>.*?)\]\((?<link>.*?)\s*(?<to>\".+\")?\)/;if(this._succeeded=e.test(this.content),this._succeeded){let t=this.content.replace(e,'<a href="$2" target=$3>$1</a>').replace(/[jJ][aA][vV][aA][sS][cC][rR][iI][pP][tT]/g,"").replace(/[oO][nN][eE][rR][rR][oO][rR]/g,"");return t.includes("target=>")&&(t=t.replace("target=>",">")),t}return this.content}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImgRenderer=void 0;t.ImgRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK-Q","HEAD","TEXT","TABLE","LIST-O","LIST-U","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=100}render(){this.document||(this.document=this.getDocument());let e=/!\[(?<alt>.*?)\]\((?<link>.*?)\s*(?<title>\".+\")?\)/;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,'<img src="$2" alt="$1" title=$3/>').replace(/[jJ][aA][vV][aA][sS][cC][rR][iI][pP][tT]/g,"").replace(/[oO][nN][eE][rR][rR][oO][rR]/g,""):this.content}succeeded(){return this._succeeded}canProcess(){var e;return"BLOCK"!==this.type||null!==(e=void 0!==this.options.emp)&&void 0!==e&&e}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckRenderer=void 0;const n=s(0);t.CheckRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["CHECK"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){var e;this.document||(this.document=this.getDocument()),n.prepareInternals(this),this.domContent=this.document.createElement((null===(e=this.options)||void 0===e?void 0:e.ordered)?"ol":"ul");const t=/\s*(?<type>[\-0-9]\.?)\s*(?<check>\[[ x]\])\s*(?<text>.*)\s*/;this.content.split("\n").map(e=>e.trim()).map(e=>{var s,n,i;const o=t.exec(e);return{type:null===(s=null==o?void 0:o.groups)||void 0===s?void 0:s.type,check:null===(n=null==o?void 0:o.groups)||void 0===n?void 0:n.check,text:null===(i=null==o?void 0:o.groups)||void 0===i?void 0:i.text}}).forEach(e=>{var t,s,n;const i=this.document.createElement("li"),o=this.document.createElement("input");o.setAttribute("type","checkbox"),"[x]"===(null===(t=e.check)||void 0===t?void 0:t.toLowerCase())&&o.setAttribute("checked","checked"),o.setAttribute("onclick","() => false"),o.setStyle("margin-right","5px"),i.appendChild(o);const r=this.document.createElement("span");r.setInnerHTML(e.text),i.appendChild(r),!(null===(s=this.options)||void 0===s?void 0:s.bullet)&&i.setStyle("list-style-type","none"),null===(n=this.domContent)||void 0===n||n.appendChild(i)});return n.processInternals(this,"task"),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";var n=this&&this.__awaiter||function(e,t,s,n){return new(s||(s=Promise))((function(i,o){function r(e){try{d(n.next(e))}catch(e){o(e)}}function c(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}d((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.CodeRenderer=void 0;const i=s(0);let o=!1;t.CodeRenderer=class{constructor({skipInit:e,version:t,serverPath:s}={skipInit:!1}){this._succeeded=!1,this.applyTo=["CODE"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0,this._version="1.20.0",this._serverPath="https://cdnjs.cloudflare.com/ajax/libs/prism",this._depName="marks_prism_dep",o||(o=!!e),this._version=null!=t?t:this._version,this._serverPath=null!=s?s:this._serverPath}render(){this.document||(this.document=this.getDocument()),this._succeeded=!1;const e=this.document.createElement("code");return this.domContent=this.document.createElement("pre"),e.appendText(this.content),this.domContent.appendChild(e),i.applyStyle(this,"code"),this.options.language&&e.classList.add("language-"+this.options.language),i.processRef(this),this.content}succeeded(){return this._succeeded}canProcess(){return"CODE"===this.type}set(e,t,s){this.type=e,this.content=t,this.options=s}renderFinished(e){return n(this,void 0,void 0,(function*(){for(o||(o=!0,yield i.loadAssets([`${this._serverPath}/${this._version}/components/prism-core.min.js`,`${this._serverPath}/${this._version}/plugins/autoloader/prism-autoloader.min.js`,`${this._serverPath}/${this._version}/themes/prism-tomorrow.min.css`,`${this._serverPath}/${this._version}/components/prism-bash.min.js`,`${this._serverPath}/${this._version}/components/prism-clike.min.js`,`${this._serverPath}/${this._version}/components/prism-javascript.min.js`,`${this._serverPath}/${this._version}/components/prism-typescript.min.js`]));!window.Prism;)yield i.waitAsync();Prism.highlightAll()}))}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EscapeRenderer=void 0;t.EscapeRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD","TEXT","TABLE","LIST-O","LIST-U","CHECK","BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=150}render(){if("false"!==this.options.xss&&("BLOCK"!==this.type||"BLOCK"===this.type&&"html"!==this.options.name)){let e=/\</g;if(this._succeeded=e.test(this.content),this._succeeded)return this.content.replace(e,"&lt;")}if("BLOCK"===this.type&&void 0!==this.options.emp,"BLOCK"===this.type&&!this.options.emp)return this._succeeded=!1,this.content;let e=/\\\\/g;return this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#92;"):(e=/\\&/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#38;"):(e=/\\=/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#61;"):(e=/\\\-/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#45;"):(e=/\\\./g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#46;"):(e=/\\`/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#96;"):(e=/\\\*/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#42;"):(e=/\\_/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#95;"):(e=/\\~/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&#126;"):(e=/\\\</g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&lt;"):(e=/\\\>/g,this._succeeded=e.test(this.content),this._succeeded?this.content.replace(e,"&gt;"):this.content))))))))))}succeeded(){return this._succeeded}canProcess(){return!0}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadRenderer=void 0;const n=s(0);t.HeadRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["HEAD"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){var e,t,s,i;this.document||(this.document=this.getDocument());let o=/^\s*(?<header>#{1,6})(?<content>.*)/;if(this._succeeded=o.test(this.content),this._succeeded){n.prepareInternals(this);const r=o.exec(this.content),c=null!==(t=null===(e=null==r?void 0:r.groups)||void 0===e?void 0:e.header)&&void 0!==t?t:"",d=null!==(i=null===(s=null==r?void 0:r.groups)||void 0===s?void 0:s.content)&&void 0!==i?i:"";this.content=`<h${c.length}>${d}</h${c.length}>`,this.domContent=this.document.createElement("div"),this.domContent.setInnerHTML(this.content),this.domContent=this.domContent.getChildItem(0),n.processInternals(this,"head")}return this.content}succeeded(){return this._succeeded}canProcess(){return"HEAD"===this.type}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ListRenderer=void 0;const n=s(0);t.ListRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["LIST-U","LIST-O"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){this.document||(this.document=this.getDocument()),this._succeeded=!1,n.prepareInternals(this);const e=this.content.split("\n");let t=-1,s=0;let i=[];e.forEach((e,n,o)=>{const r=(e=>{let t=0;for(let s=0;s<e.length&&" "===e.charAt(s);s++)t++;return t})(e),c={s:r,text:e.trimLeft().substr(2).trimLeft(),parent:t,i:n,c:[]};if(r>s&&(t=n-1,c.parent=t,s=r),r<s){let e=-1,n=null;i.forEach(t=>{t.i<c.i&&t.s<c.s&&(e=t.i,n=t)}),t=e,c.parent=e,s=r}i.push(c)}),i=i.map(e=>(-1!==e.parent&&i.filter(t=>t.i===e.parent)[0].c.push(e),e)).filter(e=>-1==e.parent);const o=(e,t)=>(t.forEach(t=>{const s=this.document.createElement("li");if(s.setInnerHTML(t.text),e.appendChild(s),t.c.length){const e=this.document.createElement("LIST-U"===this.type?"ul":"ol");s.appendChild(e),o(e,t.c)}}),e),r=this.document.createElement("LIST-U"===this.type?"ul":"ol");return o(r,i),this.domContent=r,n.processInternals(this,"list"),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RulerRenderer=void 0;const n=s(0);t.RulerRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["RULER"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=110}render(){return this.document||(this.document=this.getDocument()),this._succeeded=!1,this.domContent=this.document.createElement("hr"),"dashed"===this.options.variant&&this.domContent.setStyle("border-style","dashed"),n.applyStyle(this,"hr"),this.options.ref&&(this.globalRefs[this.options.ref]=this.domContent,this.domContent=null),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TableRenderer=void 0;const n=s(0);t.TableRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["TABLE"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){var e,t;this.document||(this.document=this.getDocument()),this._succeeded=!1,n.prepareInternals(this);const s=this.content.split("\n").map(e=>((e=e.trim()).endsWith("|")&&(e=e.substring(0,e.length-1)),e=e.substr(1)));if(s.length<2)return this.content;const i=s.shift().split("|"),o=s.shift().split("|").map(e=>{let t="left";return e.startsWith(":")&&e.endsWith(":")&&(t="center"),!e.startsWith(":")&&e.endsWith(":")&&(t="right"),t});let r=`\n  <table>\n    <thead>\n      <tr>\n      ${i.map((e,t)=>`        <th align="${o[t]}">${e}</th>`).join("\n")}\n      </tr>\n    </thead>\n    <tbody>\n    ${s.map(e=>`\n      <tr>\n      ${e.split("|").map((e,t)=>`        <td align="${o[t]}">${e}</td>`).join("\n")}\n      </tr>`).join("\n")}\n    </tbody>\n  </table>\n    `;return this.domContent=this.document.createElement("div"),this.domContent.setInnerHTML(r),(null===(e=this.domContent)||void 0===e?void 0:e.findFirst(e=>"table"===e.tagName))&&(this.domContent=null===(t=this.domContent)||void 0===t?void 0:t.findFirst(e=>"table"===e.tagName),n.applyStyle(this,"table"),this.options.width&&this.domContent.setStyle("width",this.options.width)),n.processNestedRef(this),n.processRef(this),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextRenderer=void 0;const n=s(0);t.TextRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["TEXT","BLANK"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){var e;if(this.document||(this.document=this.getDocument()),this._succeeded=!1,"BLANK"===this.type){this.domContent=this.document.createElement("p");for(let e=1;e<this.content.length;e+=2)this.domContent.appendChild(this.document.createElement("br"))}else this.content.length>0&&(n.prepareInternals(this),this.domContent=this.document.createElement(null!==(e=this.options.elt)&&void 0!==e?e:"span"),this.domContent.setInnerHTML(this.content.replace(/\n/g,"<br />")),n.processInternals(this,"text"));return this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockQRenderer=void 0;const n=s(0);t.BlockQRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK-Q"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=0}render(){var e;this.document||(this.document=this.getDocument()),this._succeeded=!1,n.prepareInternals(this),this.domContent=this.document.createElement("blockquote");const t=null===(e=this.cloneRenderer)||void 0===e?void 0:e.call(this);if(t){const e=this.content.split("\n");this.content=e.map(e=>e.trimLeft()).join("\n");const s=t.internalRender(this.content);s&&this.domContent.appendChild(s)}else console.log("No renderer");return n.processInternals(this,"blockquote"),this.content}succeeded(){return this._succeeded}canProcess(){return this.applyTo.includes(this.type)}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockHtmlRenderer=void 0;const n=s(0);t.BlockHtmlRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){var e;return this.document||(this.document=this.getDocument()),this._succeeded=!1,n.prepareInternals(this),this.domContent=this.document.createElement(null!==(e=this.options.elt)&&void 0!==e?e:"div"),this.domContent.setInnerHTML(this.content),n.processInternals(this,"html"),this.domContent.onMount('alert("Mounted")'),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"html"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockImgRenderer=void 0;const n=s(0);t.BlockImgRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){this.document||(this.document=this.getDocument()),this._succeeded=!1;const e=JSON.parse(`{ ${this.content} }`);return this.domContent=this.document.createElement("img"),this.domContent.setAttribute("alt",e.alt),this.domContent.setAttribute("title",e.title),this.domContent.setAttribute("src",e.src),n.applyStyle(this,"img"),n.processRef(this),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"img"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockMarksRenderer=void 0;const n=s(0);t.BlockMarksRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){var e,t;this.document||(this.document=this.getDocument()),this._succeeded=!1;const s=null===(e=this.cloneRenderer)||void 0===e?void 0:e.call(this);if(this.options.noPelt="true",s){this.content=n.formatMinSpace(this.content),this.domContent=s.internalRender(this.content);const e=this.domContent;this.options.fetch&&fetch(this.options.fetch).then(e=>e.text()).then(t=>{const n=s.internalRender(t);this.options.before?e.prepend(n):e.appendChild(n)})}else this.domContent=this.document.createElement(null!==(t=this.options.elt)&&void 0!==t?t:"div"),this.domContent.appendChild(this.document.createElement("text",this.content));return n.applyStyle(this,"marks"),n.processRef(this),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"marks"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockTableRenderer=void 0;const n=s(0);t.BlockTableRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.domContent=null,this.content="",this.type="",this.weight=100}render(){var e,t,s;if(this.document||(this.document=this.getDocument()),this._succeeded=!1,n.prepareInternals(this),"markdown"===this.options.format){const e=this.content.split("\n").map(e=>((e=e.trim()).endsWith("|")&&(e=e.substring(0,e.length-1)),e=e.substr(1)));if(e.length<2)return this.content;const t=e.shift().split("|"),s=e.shift().split("|").map(e=>{let t="left";return e.startsWith(":")&&e.endsWith(":")&&(t="center"),!e.startsWith(":")&&e.endsWith(":")&&(t="right"),t});let n=`\n    <table>\n      <thead>\n        <tr>\n        ${t.map((e,t)=>`        <th align="${s[t]}">${e}</th>`).join("\n")}\n        </tr>\n      </thead>\n      <tbody>\n      ${e.map(e=>`\n        <tr>\n        ${e.split("|").map((e,t)=>`        <td align="${s[t]}">${e}</td>`).join("\n")}\n        </tr>`).join("\n")}\n      </tbody>\n    </table>\n      `;this.domContent=this.document.createElement("div"),this.domContent.setInnerHTML(n)}if("csv"===this.options.format){const t=null!==(e=this.options.separator)&&void 0!==e?e:",",s=this.content.split("\n").map(e=>e=e.trim());if(s.length<2)return this.content;const n=s.shift().split(t),i=n.map((e,t)=>{var s;return null!==(s=this.options["colAlign"+(t+1)])&&void 0!==s?s:"left"});let o=`\n    <table>\n      <thead>\n        <tr>\n        ${n.map((e,t)=>`        <th align="${i[t]}">${e}</th>`).join("\n")}\n        </tr>\n      </thead>\n      <tbody>\n      ${s.map(e=>`\n        <tr>\n        ${e.split(t).map((e,t)=>`        <td align="${i[t]}">${e}</td>`).join("\n")}\n        </tr>`).join("\n")}\n      </tbody>\n    </table>\n      `;this.domContent=this.document.createElement("div"),this.domContent.setInnerHTML(o)}return(null===(t=this.domContent)||void 0===t?void 0:t.findFirst(e=>"table"===e.tagName))&&(this.domContent=null===(s=this.domContent)||void 0===s?void 0:s.findFirst(e=>"table"===e.tagName),n.applyStyle(this,"table"),this.options.width&&this.domContent.setStyle("width",this.options.width)),n.processInternals(this,"table"),this.content}succeeded(){return this._succeeded}canProcess(){var e;if("table"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())&&this.options.format)switch(this.options.format){case"markdown":case"csv":return!0;default:return!1}return!1}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockBsButtonRenderer=void 0;const n=s(2);t.BlockBsButtonRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){var e;this.document||(this.document=this.getDocument()),this._succeeded=!1;const t=JSON.parse(`{ ${this.content} }`);return this.domContent=this.document.createElement("button"),this.domContent.setAttribute("type","button"),this.domContent.classList.add("btn"),this.domContent.classList.add(`btn-${t.outlined?"outline-":""}${null!==(e=t.type)&&void 0!==e?e:"primary"}`),this.domContent.setInnerText(t.label),t.onClick&&this.domContent.setAttribute("onClick",t.onClick),n.Helper.applyStyle(this,"bs-button"),n.Helper.processRef(this),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"bs-button"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockBsCarouselRenderer=void 0;const n=s(2);t.BlockBsCarouselRenderer=class{constructor(){this._succeeded=!1,this.applyTo=["BLOCK"],this.options={},this.content="",this.domContent=null,this.type="",this.weight=0}render(){this.document||(this.document=this.getDocument()),this._succeeded=!1;JSON.parse(`{ ${this.content} }`);return this.domContent=this.document.createElement("div"),this.domContent.setInnerHTML('\n    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">\n  <ol class="carousel-indicators">\n    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>\n    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>\n    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>\n  </ol>\n  <div class="carousel-inner" style="width:800px; height:400px;">\n    <div class="carousel-item active">\n      <img src="https://www.wikipedia.org/portal/wikipedia.org/assets/img/Wikipedia-logo-v2.png" class="d-block w-100" alt="...">\n    </div>\n    <div class="carousel-item">\n      <img src="https://www.wikipedia.org/portal/wikipedia.org/assets/img/Wikipedia-logo-v2.png" class="d-block w-100" alt="...">\n    </div>\n    <div class="carousel-item">\n      <img src="https://www.wikipedia.org/portal/wikipedia.org/assets/img/Wikipedia-logo-v2.png" class="d-block w-100" alt="...">\n    </div>\n  </div>\n  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">\n    <span class="carousel-control-prev-icon" aria-hidden="true"></span>\n    <span class="sr-only">Previous</span>\n  </a>\n  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">\n    <span class="carousel-control-next-icon" aria-hidden="true"></span>\n    <span class="sr-only">Next</span>\n  </a>\n</div>\n    '),n.Helper.applyStyle(this,"bs-button"),n.Helper.processRef(this),this.content}succeeded(){return this._succeeded}canProcess(){var e;return"bs-carousel"===(null===(e=this.options.name)||void 0===e?void 0:e.toLowerCase())}set(e,t,s){this.type=e,this.content=t,this.options=s}}},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BsPlugins=void 0;const n=s(3),i=s(27),o=s(28);var r=s(3);Object.defineProperty(t,"BlockBsGridRenderer",{enumerable:!0,get:function(){return r.BlockBsGridRenderer}});var c=s(27);Object.defineProperty(t,"BlockBsButtonRenderer",{enumerable:!0,get:function(){return c.BlockBsButtonRenderer}});var d=s(28);Object.defineProperty(t,"BlockBsCarouselRenderer",{enumerable:!0,get:function(){return d.BlockBsCarouselRenderer}}),t.BsPlugins=[n.BlockBsGridRenderer,i.BlockBsButtonRenderer,o.BlockBsCarouselRenderer]},function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MarksRenderer=void 0;const i=s(31),o=n(s(4)),r=n(s(36)),c=n(s(37)),d=n(s(38)),h=n(s(39)),l=n(s(40)),a=n(s(41)),u=n(s(42)),p=n(s(43)),m=n(s(44)),f=s(0),v=s(5);class y{constructor(e){this.manualTrigger=!1,this.context={},this.targetRender="Dom",this._rendererRepo=null!=e?e:new i.RendererRepository,this._globalRefs={}}clone(){const e=new y(this._rendererRepo.clone());return e._themeStyles=this._themeStyles,e._globalRefs=this._globalRefs,e.context=this.context,e._rendererRepo.refs.forEach(e=>{e.cloneRenderer=this.clone.bind(this),e.getDocument=()=>new v.Document(this.targetRender)}),e}setThemeStyle(e){this._themeStyles=e}addThemeStyle(e){this._themeStyles=Object.assign(Object.assign({},this._themeStyles),e)}internalRender(e,t=!0,s){var n;const i=f.formatMinSpace(e).replace(/\r\n/g,"\n");this._rendererRepo.refs.forEach(e=>{e.globalRefs=this._globalRefs,e.themeStyles=this._themeStyles});let y=null!==(n=i.replace(/\\r\\n/g,"\n").split("\n"))&&void 0!==n?n:[];const g=[{type:"LIST-O",rgx:/^\s*([0-9]+|#{1})\.\s(.*)/,apply:["-"]},{type:"HEAD",rgx:/^\s*#{1,6}(.*)/,apply:["-"]},{type:"HEAD-B",rgx:/^\s*=+\s*/,apply:["-"]},{type:"CHECK",rgx:/^\s*\-\s*\[[ x]\](.*)/,apply:["-"]},{type:"LIST-U",rgx:/^\s*[\*-]\s+(.*)/,apply:["-"]},{type:"TABLE",rgx:/^\s*\|(.*)\|\s*/,apply:["-"]},{type:"BLOCK-Q",rgx:/^\s*\>(.*)/,apply:["-"]},{type:"BLOCK-B",rgx:/^\s*\[.*?\]\s*\{\{\s*/,apply:["-"],state:"BLOCK"},{type:"BLOCK-E",rgx:/^\s*\}\}\s*$/,apply:["BLOCK"],state:"-"},{type:"CODE-B",rgx:/^[`]{3}\w*\s*/,apply:["-"],state:"CODE"},{type:"CODE-E",rgx:/^[`]{3}\s*$/,apply:["CODE"],state:"-"}],_=[];let C="-";const E=g.filter(e=>"BLOCK-B"===e.type)[0];let b=0;y.forEach(e=>{let t=!1;if(g.filter(e=>e.apply.includes(C)).forEach(s=>{if(!t&&s.rgx.test(e)){if("BLOCK-E"===s.type&&(b--,b>0))return;"BLOCK-B"===s.type&&b++,_.push({type:s.type,text:e}),t=!0,"state"in s&&(C=s.state)}}),!t)switch(C){case"BLOCK":E.rgx.test(e)&&b++,_.push({type:"T-TEXT",text:e});break;case"CODE":_.push({type:"C-TEXT",text:e});break;default:0===e.length?_.push({type:"BLANK",text:""}):_.push({type:"TEXT",text:e})}}),_.filter(e=>"LIST-U"===e.type).forEach(e=>{e.text.trim().startsWith("*")&&e.text.trim().endsWith("*")&&(e.type="TEXT")});let T=null,R=[];const O={TEXT:o.default,HEAD:r.default},L={"LIST-O":d.default,"LIST-U":c.default,"BLOCK-Q":m.default,TABLE:h.default,CHECK:u.default,BLANK:p.default},x={"CODE-B":a.default,"BLOCK-B":l.default};_.forEach(e=>{switch(e.type){case"TEXT":case"HEAD":T&&(R.push(T),T=null),R.push(new O[e.type](e,this._rendererRepo));break;case"LIST-O":case"LIST-U":case"CHECK":case"BLOCK-Q":case"TABLE":case"BLANK":if(T&&(null==T?void 0:T.type)!==e.type&&(R.push(T),T=null),T){T.append(e);break}T=new L[e.type](e,this._rendererRepo);break;case"CODE-B":case"BLOCK-B":T&&(R.push(T),T=null),T=new x[e.type](e,this._rendererRepo);break;case"C-TEXT":case"T-TEXT":null==T||T.append(e);break;case"CODE-E":case"BLOCK-E":T&&R.push(T),T=null;break;case"HEAD-B":if(T&&(R.push(T),T=null),"TEXT"===R[R.length-1].type){const t=R.pop(),s=e.text.replace(/=/g,"#");R.push(new r.default({type:"HEAD",text:`${s} ${null==t?void 0:t.source}`},this._rendererRepo))}else R.push(new o.default(e,this._rendererRepo))}}),null!==T&&R.push(T),T=null,R.forEach(e=>{if("TEXT"===e.type){const t=e.source.trim();switch(t[0]){case"_":if(t.length>2){let s=!0;for(let e=0;e<t.length;e++)t[e]!==t[0]&&(s=!1);s&&(e.type="RULER")}}}if("TEXT"!==e.type||null!==T)return"TEXT"===e.type&&T?(T.append({text:e.source}),void(e.dirty=!0)):void("TEXT"!==e.type&&(T=null));T=e}),R=R.filter(e=>!1===e.dirty);const B=[];R.forEach(e=>{if(e.options["mk-repeat"]){const t=this.context[e.options["mk-repeat"]];Array.isArray(t)&&t.length>0&&t.forEach(t=>{const s=e.clone();s.process(t),B.push(s)})}else e.process(this.context),B.push(e)});const P=new v.Document(this.targetRender),N=s||P.createElement("div");return B.forEach(e=>e.domElement&&N.appendChild(e.domElement)),t||this.manualTrigger||"Dom"!==this.targetRender||setTimeout(()=>this.triggerRenderFinished(N.dom),0),N}triggerRenderFinished(e){var t;this._rendererRepo.refs.forEach(t=>{var s;return null===(s=t.renderFinished)||void 0===s?void 0:s.call(t,e)}),null===(t=this.renderFinished)||void 0===t||t.call(this)}renderFromHtmlNode(e,t){var s,n,i,o;new v.Document(this.targetRender);let r=null!==(n=null===(s=document.querySelector(e))||void 0===s?void 0:s.innerHTML)&&void 0!==n?n:"";var c=document.createElement("textarea");c.innerHTML=r,r=null!==(i=c.value)&&void 0!==i?i:"";const d=this.internalRender(r,!1),h=null!==(o=document.querySelector(null!=t?t:"body"))&&void 0!==o?o:document.body,l=document.createElement("script");l.type="text/javascript",l.appendChild(document.createTextNode(d.getScripts().join("\n"))),d.toDom().appendChild(l),h.appendChild(d.toDom())}renderToText(e,t=2){const s=this.internalRender(e,!1);return s.toHtml(t)+`\n    <script type="text/javascript">\n      ${s.getScripts().join("\n\n")}\n    <\/script>\n    `}render(e,t){var s;const n=this.internalRender(e,!1);t&&("string"==typeof t?document.querySelector(t):t).appendChild(n.toDom());const i=document.createElement("script");return i.type="text/javascript",i.appendChild(document.createTextNode(n.getScripts().join("\n"))),null===(s=n.toDom())||void 0===s||s.appendChild(i),n.toDom()}registerRenderers(...e){e.forEach(e=>{var t;e.cloneRenderer=this.clone.bind(this),e.getDocument=()=>new v.Document(this.targetRender),null===(t=e.willInit)||void 0===t||t.call(e),this._rendererRepo.register(e)})}}t.MarksRenderer=y},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RendererRepository=void 0;class n{constructor(){this.refs=[],this.hash={}}clear(){this.hash={}}register(e){this.refs.push(e),e.applyTo.forEach(t=>{t in this.hash||(this.hash[t]=[]),this.hash[t].push(e)})}getByType(e,t){var s,n;return null!==(n=null===(s=this.hash[e])||void 0===s?void 0:s.filter(s=>(s.set(e,t.content,t.options),s.canProcess())))&&void 0!==n?n:[]}clone(){const e=new n;return this.refs.forEach(t=>e.register(new t.constructor)),e}}t.RendererRepository=n},function(e,t,s){"use strict";var n,i=this&&this.__classPrivateFieldGet||function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.VDom_Element=void 0;const o=s(33);t.VDom_Element=class{constructor(e,t,s,r){this._doc=e,this._tagName=t,this.target=s,this.textContent=r,this.childNodes=[],this._classList=[],this._attributes={},this._styles={},this._style="",this._MountScript=[],this.classList={add:e=>{var t;!this._classList.includes(e)&&this._classList.push(e),null===(t=this.dom)||void 0===t||t.classList.add(e)},remove:e=>{var t;this._classList=this._classList.filter(t=>t!==e),null===(t=this.dom)||void 0===t||t.classList.remove(e)},toggle:e=>{var t;this._classList.includes(e)?this.classList.add(e):this.classList.remove(e),null===(t=this.dom)||void 0===t||t.classList.toggle(e)}},n.set(this,(e,t)=>{if(e.nodeType===o.NODE_TYPE.TEXT_NODE){return this._doc.createElement(e.tagName,e.textContent)}if(e.nodeType===o.NODE_TYPE.ELEMENT_NODE){const t=this._doc.createElement(e.tagName);if(e.className&&e.className.split(" ").map(e=>e.trim()).forEach(e=>{t.classList.add(e)}),e.id&&t.setAttribute("id",e.id),e.attrs)for(const s in e.attrs)"class"!==s&&t.setAttribute(s,e.attrs[s]);return e.childNodes.forEach(e=>{var s;e.nodeType===o.NODE_TYPE.TEXT_NODE&&0===(null===(s=e.textContent)||void 0===s?void 0:s.trim().length)||t.appendChild(i(this,n).call(this,e))}),t}}),this._tagName=this._tagName.toLowerCase(),"Dom"===s&&"text"===this._tagName&&(this.dom=document.createElement("span"),this.dom.innerHTML=r),"Dom"===s&&"innertext"===this._tagName&&(this.dom=document.createTextNode(r)),"Dom"===s&&"text"!==this._tagName&&"innertext"!==this._tagName&&(this.dom=document.createElement(t))}get id(){return this.getAttribute("id")}get childElementCount(){return this.childNodes.length}onMount(e){this._MountScript.push(e)}getScripts(){const e=new Array;for(let t=0;t<this.childElementCount;t++)e.push(...this.getChildItem(t).getScripts());return e.push(...this._MountScript),e}get tagName(){return this._tagName}getChildItem(e){return this.childNodes[e]}prepend(e){var t;this.childNodes.unshift(e),null===(t=this.dom)||void 0===t||t.prepend(e.dom)}appendChild(e){var t;this.childNodes.push(e),null===(t=this.dom)||void 0===t||t.appendChild(e.dom)}setStyle(e,t){var s;this._styles[e]=String(t);let n=this._style;for(const e in this._styles)n=`${n}${n.trim().length>0?"; ":""}${e}:${this._styles[e]}`;this._attributes.style=n,null===(s=this.dom)||void 0===s||s.setAttribute("style",n)}setInnerHTML(e){const t=(new o.HtmlParser).parse(e);this.childNodes.length=0,"Dom"===this.target&&(this.dom.innerHTML=""),t.childNodes.forEach(e=>{var t;e.nodeType===o.NODE_TYPE.TEXT_NODE&&0===(null===(t=e.textContent)||void 0===t?void 0:t.trim().length)||this.appendChild(i(this,n).call(this,e))})}setInnerText(e){this.childNodes.length=0,"Dom"===this.target&&(this.dom.innerText=e),this.textContent=e}prependText(e){const t=this._doc.createElement("innerText",e);this.prepend(t)}appendText(e){const t=this._doc.createElement("innerText",e);this.appendChild(t)}setAttribute(e,t){var s;try{this._attributes[e]=t,null===(s=this.dom)||void 0===s||s.setAttribute(e,t),"style"===e&&(this._style=t,this._styles={})}catch(e){console.error("VDOM","setAttribute",e,"for object",this)}}getAttribute(e){return this._attributes[e]}removeAttribute(e){var t;delete this._attributes[e],null===(t=this.dom)||void 0===t||t.removeAttribute(this.target)}findFirst(e,t=-1){const s=this.childNodes.filter(t=>e(t));if(s.length)return s[0];if(t>0||t<0)for(const s of this.childNodes){const n=s.findFirst(e,t-1);if(n)return n}return null}findAll(e,t=-1){const s=this.childNodes.filter(t=>e(t));if(t>0||t<0)for(const n of this.childNodes){const i=n.findAll(e,t-1);i&&s.push(...i)}return s.length?s:null}addEventListener(e,t){var s;null===(s=this.dom)||void 0===s||s.addEventListener(e,t)}toDom(){var e;return null!==(e=this.dom)&&void 0!==e?e:null}toHtml(e=0){var t;if("text"===this.tagName&&this.textContent)return`<span>${this.textContent}</span>`;if("br"===this.tagName)return"<br>";if("hr"===this.tagName)return"<hr>";if("innertext"===this.tagName)return null!==(t=this.textContent)&&void 0!==t?t:"";let s="";for(const e in this._attributes)s+=` ${e}=${JSON.stringify(this._attributes[e])}`;const n=this._classList.join(" "),i=this.childNodes.map(t=>t.toHtml(-1!==e?e+2:-1)).join(-1!==e?"\n":""),o=this._tagName;let r="";0===this.childNodes.length&&(r=`</${o}>`),["input","img"].includes(o)&&(r="");const c=[];return c.push(`${"".padStart(e," ")}<${o}${n.length?` class="${n}"`:""}${s}>${r}`),this.textContent&&c.push(this.textContent),this.childNodes.length&&c.push(i),this.childNodes.length&&c.push(`${"".padStart(e," ")}</${o}>`),c.join(-1!==e?"\n":"")}},n=new WeakMap},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RawHtmlParser=t.HtmlScanner=t.HtmlParser=void 0;const n=s(34),i=s(35);Object.defineProperty(t,"HtmlScanner",{enumerable:!0,get:function(){return i.HtmlScanner}});class o extends n.HtmlParser{constructor(e){(e=e||{}).scanner||(e.scanner=new i.HtmlScanner),super(e)}parse(e){super.parse(e);const t=this.scanner.getRootNode();return this.scanner.reset(),t}}t.HtmlParser=o;const r=n.HtmlParser;t.RawHtmlParser=r;var c=s(6);Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(t,"NODE_TYPE",{enumerable:!0,get:function(){return c.NODE_TYPE}})},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlParser=void 0;const n=/\s*\/\s*>\s*$/m,i=e=>{throw new Error("Must implement the method "+(e||""))};class o{constructor(e){(e=e||{}).scanner&&(this.scanner=e.scanner,e.scanner=null),this.options=Object.assign({},o.defaults,e)}parse(e){let t,s,n,i=!1;for(;e.length;)"\x3c!--"===e.substring(0,4)?(t=e.indexOf("--\x3e"),-1!==t?(this.scanner.comment(e.substring(4,t)),e=e.substring(t+3),i=!1):i=!0):"</"===e.substring(0,2)?(s=this.endTagRe.exec(e),s?(e=RegExp.rightContext,i=!1,this.parseEndTag(RegExp.lastMatch,s[1])):i=!0):"<"===e.charAt(0)&&(s=this.startTagRe.exec(e),s?(e=RegExp.rightContext,i=!1,this.parseStartTag(RegExp.lastMatch,s[1],s)):i=!0),i&&(t=e.indexOf("<"),0===t&&(t=e.substring(1).indexOf("<")),-1===t?(n=e,e=""):(n=e.substring(0,t),e=e.substring(t)),this.options.ignoreWhitespaceText&&/^\s*$/.test(n)||this.scanner.characters(n)),i=!0,s=null}parseStartTag(e,t,s){const i=n.test(e);let o=s[2];i&&(o=o.replace(/\s*\/\s*$/,""));const r=this.parseAttributes(t,o);this.scanner.startElement(t,r,i,s[0])}parseEndTag(e,t){this.scanner.endElement(t)}parseAttributes(e,t){const s={};return t.replace(this.attrRe,(e,t,n,i,o,r,c,d)=>(s[t]=d||r||i||!0,"")),s}}t.HtmlParser=o,o.defaults={ignoreWhitespaceText:!1},o.prototype.attrRe=/([^=\s]+)(\s*=\s*(("([^"]*)")|('([^']*)')|[^>\s]+))?/gm,o.prototype.endTagRe=/^<\/([^>\s]+)[^>]*>/m,o.prototype.startTagRe=/^<([^>\s\/]+)((\s+[^=>\s]+(\s*=\s*(("[^"]*")|('[^']*')|[^>\s]+))?)*)\s*\/?\s*>/m,o.prototype.scanner={startElement(){i("startElement")},endElement(){i("endElement")},characters(){i("characters")},comment(){i("comment")}}},function(e,t,s){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,s,n){void 0===n&&(n=s),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[s]}})}:function(e,t,s,n){void 0===n&&(n=s),e[n]=t[s]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var s in e)"default"!==s&&Object.hasOwnProperty.call(e,s)&&n(t,e,s);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.HtmlScanner=void 0;const r=o(s(6)),{ELEMENT_NODE:c,TEXT_NODE:d,COMMENT_NODE:h,DOCUMENT_NODE:l,DOCUMENT_TYPE_NODE:a}=r.NODE_TYPE,{DoctypeNode:u,DocumentNode:p}=r,m=/^\s*<!doctype\s+(html)(\s+public(\s+('[^']+'|"[^"]+"))?(\s+('[^']+'|"[^"]+"))?)?\s*/i,f={doctype(e,t,s,n,i){const o=e.path[e.path.length-1],r=m.exec(i)||[],c=new u({tagName:"doctype",nodeType:a,parentNode:o,name:r[1],publicId:r[4]&&r[4].substring(1,r[4].length-1),systemId:r[6]&&r[6].substring(1,r[6].length-1)});o.appendChild(c)},_default(e,t,s,n,i){const o=e.path[e.path.length-1],d=new r.Node({tagName:t,nodeType:c,attrs:s,parentNode:o});o.appendChild(d),n||e.path.push(d)},_selfCloseTag(e,t,s,n,i){f._default(e,t,s,!0,i)}};f["!doctype"]=f.doctype,["area","base","link","br","hr","col","command","embed","img","input","keygen","meta","param","source","track","wbr"].forEach(e=>{f[e]=f._selfCloseTag});t.HtmlScanner=class{constructor(){this.reset()}reset(){this.rootNode=new p({tagName:"document",nodeType:l}),this.path=[this.rootNode]}getRootNode(){return this.rootNode}startElement(e,t,s,n){return e=e.toLowerCase(),f[e]?f[e](this,e,t,s,n):f._default(this,e,t,s,n)}endElement(e){this.path.pop()}characters(e){if(/^\s*$/.test(e))return;const t=this.path[this.path.length-1],s=new r.Node({tagName:"text",nodeType:d,textContent:e,parentNode:t});t.appendChild(s)}comment(e){const t=this.path[this.path.length-1],s=new r.Node({tagName:"comment",nodeType:h,textContent:e,parentNode:t});t.appendChild(s)}}},function(e,t,s){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(s(4));class o extends i.default{constructor(e,t){if(super(e,t),this.type="HEAD",e){if(this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}}}t.default=o},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="LIST-U",e){if(this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}}append(e){this.source+="\n",this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="LIST-O",e){if(this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}}append(e){this.source+="\n",this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="TABLE",!e)return;let s=e.text,n="";e.text.includes("::- ")&&([s,n]=e.text.split("::-")),this.source=s,n.length&&this.parseOptions(n)}append(e){this.source+="\n",this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){var s,n,i;super(t),this.type="BLOCK",e&&(this.reset(),this.parseOptions(null!==(i=null===(n=null===(s=/^\s*\[(?<options>.*?)\]\s*\{\{/.exec(e.text))||void 0===s?void 0:s.groups)||void 0===n?void 0:n.options)&&void 0!==i?i:""))}append(e){this.source.length>0&&(this.source+="\n"),this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){super(t),this.type="CODE",e&&(this.parseOptions("language:"+e.text.trim().substr(3)),super.source="")}append(e){this.source.length>0&&(this.source+="\n"),this.source+=e.text,this.parse()}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="CHECK",e){if(this.reset(),this.source=e.text,this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}}append(e){this.source+="\n",this.source+=e.text,this.parse()}parse(){this.cleanSource=this.source}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){super(t),this.type="BLANK",e&&(this.reset(),this.source="@",this.parse())}append(e){this.source+="@",this.parse()}parse(){this.cleanSource=this.source}}t.default=i},function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=s(1);class i extends n.BaseModel{constructor(e,t){if(super(t),this.type="BLOCK-Q",e){if(this.source=e.text.replace(">",""),this.source.includes("::- ")){const e=this.source.split("::-");this.source=e[0],this.parseOptions(e[1])}this.parse()}}append(e){this.source+="\n",this.source+=e.text.replace(">",""),this.parse()}}t.default=i}]);